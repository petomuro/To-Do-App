import{c as Z,r as G,u as ee,b as j,d as O,l as X,a as ue}from"./index-453543cd.js";import{d as K,r as te,a as B,g as C,o as i,c as l,F as M,b as P,n as U,u as w,e as o,f as D,t as S,E as J,i as pe,j as me,k as fe,w as Y,G as ve}from"./index-97bc10d5.js";const _e={key:0,class:"flex flex-column p-3"},ge={class:"flex flex-column my-3"},ye=o("label",{class:"text-primary",for:"content"},"Content",-1),he=["onClick"],xe={class:"flex flex-column"},$e=o("span",{class:"text-primary"},"Title",-1),Te={class:"text-black-alpha-90"},ke={class:"flex flex-column my-3"},be=o("span",{class:"text-primary"},"Content",-1),De={class:"text-black-alpha-90"},we={class:"flex flex-column"},Ie=o("span",{class:"text-primary"},"Deadline",-1),Ce={class:"text-black-alpha-90"},Le={class:"flex justify-content-between align-items-center"},Ve={key:0,class:"flex align-items-center p-3"},Ee=["onClick"],Ae=["onClick"],Be={key:1,class:"flex align-items-center p-3"},Se=["onClick"],je=["onClick"],Ue=["onClick"],Me=["onClick"],Ne={key:2,class:"flex align-items-center p-3"},Fe=o("span",{class:"border-2 border-round-xl p-2 bg-green-800 border-green-800"},"Done",-1),Pe=[Fe],ze={key:3,class:"flex align-items-center p-3"},Oe=o("span",{class:"border-2 border-round-xl p-2 bg-orange-800 border-orange-800"},"In progress",-1),Je=[Oe],Re={key:0,class:"flex"},qe=K({__name:"TheTodos",props:{listId:null,listsData:null,todosData:null,filtering:{type:Boolean}},emits:["deleteTodo","createTodo","isEditingTodo","updateTodo","doneTodo"],setup(y,{emit:h}){const m=y,N={collection:{$each:Z.forEach({title:{required:G},deadline:{required:G}})}},b=te({collection:m.todosData}),x=ee(N,b),a=async()=>await x.value.$validate(),$=B(m.todosData),I=(T,d)=>{h("deleteTodo",{listId:T,todoId:d})},E=T=>{h("createTodo",T)},v=(T,d)=>{const _=j(m.listsData,T),p=O(m.todosData,d);m.todosData[p].is_adding_todo?I(T,d):h("isEditingTodo",{listIndex:_,todoIndex:p,is_editing_todo:!m.todosData[p].is_editing_todo})},F=async(T,d)=>{const _=j(m.listsData,T),p=O(m.todosData,d);await a()&&h("updateTodo",{listIndex:_,listId:T,todoIndex:p,todoId:d,newTodo:$.value[p]})},L=(T,d)=>{const _=j(m.listsData,T),p=O(m.todosData,d);h("doneTodo",{listIndex:_,listId:T,todoIndex:p,todoId:d,is_done_todo:!m.todosData[p].is_done_todo})};return(T,d)=>{const _=C("InputText"),p=C("TheTextarea"),r=C("TheCalendar"),c=C("TheButton");return i(),l(M,null,[(i(!0),l(M,null,P(y.todosData,(s,g)=>(i(),l("div",{key:g,class:U([{errorTitle:w(x).collection.$each.$response.$errors[g].title.length,errorDeadline:w(x).collection.$each.$response.$errors[g].deadline.length},"flex flex-column justify-content-between bg-gray-300 border-round-xl m-3"])},[s!=null&&s.is_editing_todo?(i(),l("div",_e,[o("label",{class:U([{"p-error":w(x).collection.$each.$response.$errors[g].title.length},"text-primary"]),for:"title"},"Title*",2),D(_,{id:"title",modelValue:$.value[g].title,"onUpdate:modelValue":n=>$.value[g].title=n,class:U({"p-invalid":w(x).collection.$each.$response.$errors[g].title.length}),placeholder:"Add title for todo",type:"text"},null,8,["modelValue","onUpdate:modelValue","class"]),(i(!0),l(M,null,P(w(x).collection.$each.$response.$errors[g].title,n=>(i(),l("div",{key:n,class:"p-error"},S(n.$message.replace("Value","Title")),1))),128)),o("div",ge,[ye,D(p,{id:"content",modelValue:$.value[g].content,"onUpdate:modelValue":n=>$.value[g].content=n,"auto-resize":!0,cols:"30",placeholder:"Add content for todo",rows:"5"},null,8,["modelValue","onUpdate:modelValue"])]),o("label",{class:U([{"p-error":w(x).collection.$each.$response.$errors[g].deadline.length},"text-primary"]),for:"deadline"},"Deadline*",2),D(r,{id:"deadline",modelValue:$.value[g].deadline,"onUpdate:modelValue":[n=>$.value[g].deadline=n,n=>w(X)($.value[g].deadline)],class:U({"p-invalid":w(x).collection.$each.$response.$errors[g].deadline.length}),"date-format":"dd.mm.yy",placeholder:"Add deadline for todo","show-time":""},null,8,["modelValue","onUpdate:modelValue","class"]),(i(!0),l(M,null,P(w(x).collection.$each.$response.$errors[g].deadline,n=>(i(),l("div",{key:n,class:"p-error"},S(n.$message.replace("Value","Deadline")),1))),128))])):(i(),l("div",{key:1,class:"flex flex-column p-3 cursor-pointer",onClick:n=>v(y.listId,s==null?void 0:s.id)},[o("div",xe,[$e,o("h3",Te,S(s==null?void 0:s.title),1)]),o("div",ke,[be,o("p",De,S(s==null?void 0:s.content),1)]),o("div",we,[Ie,o("p",Ce,S(w(X)(s==null?void 0:s.deadline)),1)])],8,he)),o("div",Le,[s!=null&&s.is_editing_todo?(i(),l("div",Ve,[o("i",{class:"pi pi-check cursor-pointer text-primary",onClick:n=>F(y.listId,s==null?void 0:s.id)},null,8,Ee),o("i",{class:"pi pi-times cursor-pointer mx-3 text-red-800",onClick:n=>v(y.listId,s==null?void 0:s.id)},null,8,Ae)])):(i(),l("div",Be,[s!=null&&s.is_done_todo?(i(),l("i",{key:1,class:"pi pi-times cursor-pointer text-red-800",onClick:n=>L(y.listId,s==null?void 0:s.id)},null,8,je)):(i(),l("i",{key:0,class:"pi pi-check cursor-pointer text-primary",onClick:n=>L(y.listId,s==null?void 0:s.id)},null,8,Se)),o("i",{class:"pi pi-pencil mx-3 cursor-pointer text-blue-800",onClick:n=>v(y.listId,s==null?void 0:s.id)},null,8,Ue),o("i",{class:"pi pi-trash cursor-pointer text-red-800",onClick:n=>I(y.listId,s==null?void 0:s.id)},null,8,Me)])),s!=null&&s.is_done_todo?(i(),l("div",Ne,Pe)):J("",!0),!(s!=null&&s.is_adding_todo)&&!(s!=null&&s.is_done_todo)?(i(),l("div",ze,Je)):J("",!0)])],2))),128)),y.filtering?J("",!0):(i(),l("div",Re,[D(c,{class:"m-3",label:"+ Add new todo",onClick:d[0]||(d[0]=s=>E(y.listId))})]))],64)}}}),Ye={class:"flex justify-content-between"},Ge={key:0,class:"flex flex-column p-3"},Ke={key:1,class:"flex flex-column p-3"},He=o("span",{class:"text-primary"},"Name",-1),Qe=["onClick"],We={key:2,class:"flex align-items-center px-3"},Xe=["onClick"],Ze=["onClick"],et={key:3,class:"flex align-items-center px-3"},tt=["onClick"],st=["onClick"],nt={key:0,class:"flex flex-column"},ot=K({__name:"TheLists",props:{listsData:null,filtering:{type:Boolean}},emits:["deleteList","createList","isEditingList","updateList","deleteTodo","createTodo","isEditingTodo","updateTodo","doneTodo"],setup(y,{emit:h}){const m=y,N={collection:{$each:Z.forEach({name:{required:G}})}},b=te({collection:m.listsData}),x=ee(N,b),a=async()=>await x.value.$validate(),$=r=>{h("deleteList",r)},I=()=>{h("createList")},E=r=>{const c=j(m.listsData,r);m.listsData[c].is_adding_list?$(r):h("isEditingList",{listIndex:c,is_editing_list:!m.listsData[c].is_editing_list})},v=B(m.listsData),F=async r=>{const c=j(m.listsData,r);await a()&&h("updateList",{listIndex:c,listId:r,newList:v.value[c]})},L=r=>{h("deleteTodo",r)},T=r=>{h("createTodo",r)},d=r=>{h("isEditingTodo",r)},_=r=>{h("updateTodo",r)},p=r=>{h("doneTodo",r)};return(r,c)=>{const s=C("InputText"),g=C("TheButton");return i(),l(M,null,[(i(!0),l(M,null,P(y.listsData,(n,A)=>(i(),l("div",{key:A,class:U([{errorName:w(x).collection.$each.$response.$errors[A].name.length},"flex flex-column bg-gray-200 border-round-xl m-3 w-30rem"])},[o("div",Ye,[n!=null&&n.is_editing_list?(i(),l("div",Ge,[o("label",{class:U([{"p-error":w(x).collection.$each.$response.$errors[A].name.length},"text-primary"]),for:"name"},"Name*",2),D(s,{modelValue:v.value[A].name,"onUpdate:modelValue":f=>v.value[A].name=f,placeholder:"Add name for list",type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(i(!0),l(M,null,P(w(x).collection.$each.$response.$errors[A].name,f=>(i(),l("div",{key:f,class:"p-error"},S(f.$message.replace("Value","Title")),1))),128))])):(i(),l("div",Ke,[He,o("h2",{class:"cursor-pointer text-black-alpha-90",onClick:f=>E(n==null?void 0:n.id)},S(n==null?void 0:n.name),9,Qe)])),n!=null&&n.is_editing_list?(i(),l("div",We,[o("i",{class:"pi pi-check mx-3 cursor-pointer text-primary",onClick:f=>F(n==null?void 0:n.id)},null,8,Xe),o("i",{class:"pi pi-times cursor-pointer text-red-800",onClick:f=>E(n==null?void 0:n.id)},null,8,Ze)])):(i(),l("div",et,[o("i",{class:"pi pi-pencil mx-3 cursor-pointer text-blue-800",onClick:f=>E(n==null?void 0:n.id)},null,8,tt),o("i",{class:"pi pi-trash cursor-pointer text-red-800",onClick:f=>$(n==null?void 0:n.id)},null,8,st)]))]),D(qe,{filtering:y.filtering,"list-id":parseInt(n==null?void 0:n.id.toString()),"lists-data":y.listsData,"todos-data":n==null?void 0:n.todos,onDeleteTodo:c[0]||(c[0]=f=>L(f)),onCreateTodo:c[1]||(c[1]=f=>T(f)),onIsEditingTodo:c[2]||(c[2]=f=>d(f)),onUpdateTodo:c[3]||(c[3]=f=>_(f)),onDoneTodo:c[4]||(c[4]=f=>p(f))},null,8,["filtering","list-id","lists-data","todos-data"])],2))),128)),y.filtering?J("",!0):(i(),l("div",nt,[D(g,{class:"m-3",label:"+ Add new list",onClick:c[5]||(c[5]=n=>I())})]))],64)}}}),at={class:"flex flex-column"},it={class:"flex justify-content-between align-items-center py-3 px-5 bg-cadet-blue"},lt=o("h1",{class:"text-white-alpha-50"},"todo app",-1),dt={class:"mx-3"},rt=o("div",null,null,-1),ct={class:"py-3 px-5 absolute right-0 z-1"},ut={class:"flex flex-column"},pt={class:"p-input-icon-left"},mt=o("i",{class:"pi pi-search z-1"},null,-1),ft={class:"field-checkbox my-3"},vt=o("label",{for:"done"},"Done",-1),_t={class:"field-checkbox"},gt=o("label",{for:"inProgress"},"In progress",-1),yt={class:"flex flex-wrap p-3"},$t=K({__name:"BoardPage",async setup(y){let h,m;const N=ve(),b=parseInt(N.params.id),x=B({}),a=B([]),$=ue(),I=()=>{$.setLists(b,a.value)},E=pe(),v=me(),F=async()=>{try{const e=await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${b}`),t=await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${b}/lists`),k=await e.json(),V=await t.json();x.value=k,a.value=V,I(),v.add({severity:"success",summary:"Success Message",detail:"Data fetched successfully",life:3e3})}catch(e){v.add({severity:"error",summary:"Error Message",detail:e,life:3e3})}},L=async()=>{$.$state.boardId=b,$.getBoards&&$.getLists?(x.value=JSON.parse($.getBoards).find(e=>e.id==b),a.value=JSON.parse($.getLists)):await F()};[h,m]=fe(()=>L()),await h,m();const T=B(!1),d=B(""),_=B(!1),p=B(!1),r=()=>{a.value.forEach((e,t)=>{a.value[t].todos=e.todos.filter(({title:k,content:V,deadline:z})=>[k,V,new Date(z).toLocaleString("sk-SK")].some(q=>q.toLowerCase().includes(d.value.toLowerCase())))})},c=()=>{a.value.forEach((e,t)=>{a.value[t].todos=e.todos.filter(({is_done_todo:k})=>[k].some(V=>V===_.value))})},s=()=>{a.value.forEach((e,t)=>{a.value[t].todos=e.todos.filter(({is_done_todo:k})=>[k].some(V=>!V===p.value))})},g=()=>d.value!==""&&!_.value&&!p.value?(r(),!0):d.value===""&&_.value&&!p.value?(c(),!0):d.value===""&&!_.value&&p.value?(s(),!0):d.value===""&&_.value&&p.value?(c(),s(),!0):d.value!==""&&_.value&&!p.value?(r(),c(),!0):d.value!==""&&!_.value&&p.value?(r(),s(),!0):d.value!==""&&_.value&&p.value?(r(),!0):!1,n=async()=>{await L(),T.value=g()},A=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${b}/lists/${e}`,{method:"DELETE"}),v.add({severity:"success",summary:"Success Message",detail:"List deleted successfully",life:3e3})}catch(t){v.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},f=async e=>{await E.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:async()=>{const t=j(a.value,e);a.value.splice(t,1),await A(e),I()},reject:()=>{v.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})},se=async()=>{a.value.push({id:a.value.length+1,boardId:b,name:"",is_adding_list:!0,is_editing_list:!1,todos:[]});const e=a.value.length-1;await H({listIndex:e,is_editing_list:!0})},H=async e=>{a.value[e.listIndex].is_editing_list=e.is_editing_list,e.is_editing_list||await L()},ne=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${b}/lists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.value[e.listIndex].name})}),v.add({severity:"success",summary:"Success Message",detail:"List created successfully",life:3e3})}catch(t){v.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},oe=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${b}/lists/${e.listId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value[e.listIndex])}),v.add({severity:"success",summary:"Success Message",detail:"List updated successfully",life:3e3})}catch(t){v.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},ae=async e=>{a.value[e.listIndex]=e.newList,a.value[e.listIndex].is_editing_list=!1,a.value[e.listIndex].is_adding_list?(a.value[e.listIndex].is_adding_list=!1,await ne(e)):await oe(e),I()},R=async(e,t)=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${b}/lists/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value[t])}),v.add({severity:"success",summary:"Success Message",detail:"Toast updated successfully",life:3e3})}catch(k){v.add({severity:"error",summary:"Error Message",detail:k,life:3e3})}},ie=async e=>{await E.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:async()=>{const t=j(a.value,e.listId),k=O(a.value[t].todos,e.todoId);a.value[t].todos.splice(k,1),await R(e.listId,t),I()},reject:()=>{v.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})},le=async e=>{const t=j(a.value,e);a.value[t].todos.push({id:a.value[t].todos.length+1,title:"",content:"",deadline:"",is_adding_todo:!0,is_editing_todo:!1,is_done_todo:!1});const k=a.value[t].todos.length-1;await Q({listIndex:t,todoIndex:k,is_editing_todo:!0})},Q=async e=>{a.value[e.listIndex].todos[e.todoIndex].is_editing_todo=e.is_editing_todo,e.is_editing_todo||await L()},de=async e=>{a.value[e.listIndex].todos[e.todoIndex]=e.newTodo,a.value[e.listIndex].todos[e.todoIndex].is_adding_todo=!1,a.value[e.listIndex].todos[e.todoIndex].is_editing_todo=!1,await R(e.listId,e.listIndex),I()},re=async e=>{a.value[e.listIndex].todos[e.todoIndex].is_done_todo=e.is_done_todo,await R(e.listId,e.listIndex),I()};return(e,t)=>{var W;const k=C("RouterLink"),V=C("InputText"),z=C("TheCheckbox"),q=C("AccordionTab"),ce=C("TheAccordion");return i(),l("div",at,[o("div",it,[D(k,{class:"no-underline",to:"/"},{default:Y(()=>[lt]),_:1}),o("h1",dt,S((W=x.value)==null?void 0:W.title),1),rt]),o("div",ct,[D(ce,null,{default:Y(()=>[D(q,{header:"Filter"},{default:Y(()=>[o("div",ut,[o("span",pt,[mt,D(V,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=u=>d.value=u),placeholder:"Search",type:"text",onInput:t[1]||(t[1]=u=>n())},null,8,["modelValue"])]),o("div",ft,[D(z,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=u=>_.value=u),binary:!0,"input-id":"done",onInput:t[3]||(t[3]=u=>n())},null,8,["modelValue"]),vt]),o("div",_t,[D(z,{modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=u=>p.value=u),binary:!0,"input-id":"inProgress",onInput:t[5]||(t[5]=u=>n())},null,8,["modelValue"]),gt])])]),_:1})]),_:1})]),o("div",yt,[D(ot,{filtering:T.value,"lists-data":a.value,onDeleteList:t[6]||(t[6]=u=>f(u)),onCreateList:t[7]||(t[7]=u=>se()),onIsEditingList:t[8]||(t[8]=u=>H(u)),onUpdateList:t[9]||(t[9]=u=>ae(u)),onDeleteTodo:t[10]||(t[10]=u=>ie(u)),onCreateTodo:t[11]||(t[11]=u=>le(u)),onIsEditingTodo:t[12]||(t[12]=u=>Q(u)),onUpdateTodo:t[13]||(t[13]=u=>de(u)),onDoneTodo:t[14]||(t[14]=u=>re(u))},null,8,["filtering","lists-data"])])])}}});export{$t as default};
