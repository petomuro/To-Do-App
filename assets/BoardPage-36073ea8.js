import{c as ee,r as H,u as te,d as A,e as O,l as Y,a as pe,g as Z,b as me}from "./index-e2b7bd1b.js";import{d as K,r as se,a as V,g as C,o as i,c as l,F as j,b as P,n as M,u as w,e as o,f as T,t as E,G as q,i as fe,j as ve,k as _e,w as G,H as ge}from "./index-58b1b1a2.js";const he={key:0,class:"flex flex-column p-3"},ye={class:"flex flex-column my-3"},xe=o("label",{class:"text-primary",for:"content"},"Content",-1),$e=["onClick"],Te={class:"flex flex-column"},ke=o("span",{class:"text-primary"},"Title",-1),be={class:"text-black-alpha-90"},we={class:"flex flex-column my-3"},Ie=o("span",{class:"text-primary"},"Content",-1),De={class:"text-black-alpha-90"},Ce={class:"flex flex-column"},Le=o("span",{class:"text-primary"},"Deadline",-1),Ve={class:"text-black-alpha-90"},Ee={class:"flex justify-content-between align-items-center"},Ae={key:0,class:"flex align-items-center p-3"},Se=["onClick"],Be=["onClick"],Ue={key:1,class:"flex align-items-center p-3"},Me=["onClick"],je=["onClick"],Ne=["onClick"],Fe=["onClick"],Pe={key:2,class:"flex align-items-center p-3"},ze=o("span",{class:"border-2 border-round-xl p-2 bg-green-800 border-green-800"},"Done",-1),Oe=[ze],qe={key:3,class:"flex align-items-center p-3"},Je=o("span",{class:"border-2 border-round-xl p-2 bg-orange-800 border-orange-800"},"In progress",-1),Re=[Je],Ge={key:0,class:"flex"},He=K({__name:"TheTodos",props:{listId:null,listsData:null,todosData:null,filtering:{type:Boolean}},emits:["deleteTodo","createTodo","isEditingTodo","updateTodo","doneTodo"],setup(g, {emit:h}){const m=g,N={collection:{$each:ee.forEach({title:{required:H},deadline:{required:H}})}},S=se({collection:m.todosData}),n=te(N,S),F=async()=>await n.value.$validate(),p=V(m.todosData),L=(d, y)=>{h("deleteTodo",{listId:d,todoId:y})},k= d=>{h("createTodo",d)},D=(d, y)=>{const I=A(m.listsData,d),_=O(m.todosData,y);m.todosData[_].is_adding_todo?L(d,y):h("isEditingTodo",{listIndex:I,todoIndex:_,is_editing_todo:!m.todosData[_].is_editing_todo})},$=async(d, y)=>{const I=A(m.listsData,d),_=O(m.todosData,y);await F()&&h("updateTodo",{listIndex:I,listId:d,todoIndex:_,todoId:y,newTodo:p.value[_]})},x=(d, y)=>{const I=A(m.listsData,d),_=O(m.todosData,y);h("doneTodo",{listIndex:I,listId:d,todoIndex:_,todoId:y,is_done_todo:!m.todosData[_].is_done_todo})};return(d, y)=>{const I=C("InputText"),_=C("TheTextarea"),c=C("TheCalendar"),r=C("TheButton");return i(),l(j,null,[(i(!0),l(j,null,P(g.todosData,(s, f)=>(i(),l("div",{key:s.id,class:M([{errorTitle:w(n).collection.$each.$response.$errors[f].title.length,errorDeadline:w(n).collection.$each.$response.$errors[f].deadline.length},"flex flex-column justify-content-between bg-gray-300 border-round-xl m-3"])},[s!=null&&s.is_editing_todo?(i(),l("div",he,[o("label",{class:M([{"p-error":w(n).collection.$each.$response.$errors[f].title.length},"text-primary"]),for:"title"},"Title*",2),T(I,{id:"title",modelValue:p.value[f].title,"onUpdate:modelValue": t=>p.value[f].title=t,class:M({"p-invalid":w(n).collection.$each.$response.$errors[f].title.length}),placeholder:"Add title for todo",type:"text"},null,8,["modelValue","onUpdate:modelValue","class"]),(i(!0),l(j,null,P(w(n).collection.$each.$response.$errors[f].title, t=>(i(),l("div",{key:t,class:"p-error"},E(t.$message.replace("Value","Title")),1))),128)),o("div",ye,[xe,T(_,{id:"content",modelValue:p.value[f].content,"onUpdate:modelValue": t=>p.value[f].content=t,"auto-resize":!0,cols:"30",placeholder:"Add content for todo",rows:"5"},null,8,["modelValue","onUpdate:modelValue"])]),o("label",{class:M([{"p-error":w(n).collection.$each.$response.$errors[f].deadline.length},"text-primary"]),for:"deadline"},"Deadline*",2),T(c,{id:"deadline",modelValue:p.value[f].deadline,"onUpdate:modelValue":[t=>p.value[f].deadline=t, t=>w(Y)(p.value[f].deadline)],class:M({"p-invalid":w(n).collection.$each.$response.$errors[f].deadline.length}),"date-format":"dd.mm.yy",placeholder:"Add deadline for todo","show-time":""},null,8,["modelValue","onUpdate:modelValue","class"]),(i(!0),l(j,null,P(w(n).collection.$each.$response.$errors[f].deadline, t=>(i(),l("div",{key:t,class:"p-error"},E(t.$message.replace("Value","Deadline")),1))),128))])):(i(),l("div",{key:1,class:"flex flex-column p-3 cursor-pointer",onClick: t=>D(g.listId,s==null?void 0:s.id)},[o("div",Te,[ke,o("h3",be,E(s==null?void 0:s.title),1)]),o("div",we,[Ie,o("p",De,E(s==null?void 0:s.content),1)]),o("div",Ce,[Le,o("p",Ve,E(w(Y)(s==null?void 0:s.deadline)),1)])],8,$e)),o("div",Ee,[s!=null&&s.is_editing_todo?(i(),l("div",Ae,[o("i",{class:"pi pi-check cursor-pointer text-primary",onClick: t=>$(g.listId,s==null?void 0:s.id)},null,8,Se),o("i",{class:"pi pi-times cursor-pointer mx-3 text-red-800",onClick: t=>D(g.listId,s==null?void 0:s.id)},null,8,Be)])):(i(),l("div",Ue,[s!=null&&s.is_done_todo?(i(),l("i",{key:1,class:"pi pi-times cursor-pointer text-red-800",onClick: t=>x(g.listId,s==null?void 0:s.id)},null,8,je)):(i(),l("i",{key:0,class:"pi pi-check cursor-pointer text-primary",onClick: t=>x(g.listId,s==null?void 0:s.id)},null,8,Me)),o("i",{class:"pi pi-pencil mx-3 cursor-pointer text-blue-800",onClick: t=>D(g.listId,s==null?void 0:s.id)},null,8,Ne),o("i",{class:"pi pi-trash cursor-pointer text-red-800",onClick: t=>L(g.listId,s==null?void 0:s.id)},null,8,Fe)])),s!=null&&s.is_done_todo?(i(),l("div",Pe,Oe)):q("",!0),!(s!=null&&s.is_adding_todo)&&!(s!=null&&s.is_done_todo)?(i(),l("div",qe,Re)):q("",!0)])],2))),128)),g.filtering?q("",!0):(i(),l("div",Ge,[T(r,{class:"m-3",label:"+ Add new todo",onClick:y[0]||(y[0]= s=>k(g.listId))})]))],64)}}}),Ke={class:"flex justify-content-between"},Qe={key:0,class:"flex flex-column p-3"},We={key:1,class:"flex flex-column p-3"},Xe=o("span",{class:"text-primary"},"Name",-1),Ye=["onClick"],Ze={key:2,class:"flex align-items-center px-3"},et=["onClick"],tt=["onClick"],st={key:3,class:"flex align-items-center px-3"},at=["onClick"],nt=["onClick"],ot={key:0,class:"flex flex-column"},it=K({__name:"TheLists",props:{listsData:null,filtering:{type:Boolean}},emits:["deleteList","createList","isEditingList","updateList","deleteTodo","createTodo","isEditingTodo","updateTodo","doneTodo"],setup(g, {emit:h}){const m=g,N={collection:{$each:ee.forEach({name:{required:H}})}},S=se({collection:m.listsData}),n=te(N,S),F=async()=>await n.value.$validate(),p=V(m.listsData),L= c=>{h("deleteList",c)},k=()=>{h("createList")},D= c=>{const r=A(m.listsData,c);m.listsData[r].is_adding_list?L(c):h("isEditingList",{listIndex:r,is_editing_list:!m.listsData[r].is_editing_list})},$=async c=>{const r=A(m.listsData,c);await F()&&h("updateList",{listIndex:r,listId:c,newList:p.value[r]})},x= c=>{h("deleteTodo",c)},d= c=>{h("createTodo",c)},y= c=>{h("isEditingTodo",c)},I= c=>{h("updateTodo",c)},_= c=>{h("doneTodo",c)};return(c, r)=>{const s=C("InputText"),f=C("TheButton");return i(),l(j,null,[(i(!0),l(j,null,P(g.listsData,(t, B)=>(i(),l("div",{key:t.id,class:M([{errorName:w(n).collection.$each.$response.$errors[B].name.length},"flex flex-column bg-gray-200 border-round-xl m-3 w-30rem"])},[o("div",Ke,[t!=null&&t.is_editing_list?(i(),l("div",Qe,[o("label",{class:M([{"p-error":w(n).collection.$each.$response.$errors[B].name.length},"text-primary"]),for:"name"},"Name*",2),T(s,{modelValue:p.value[B].name,"onUpdate:modelValue": v=>p.value[B].name=v,placeholder:"Add name for list",type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(i(!0),l(j,null,P(w(n).collection.$each.$response.$errors[B].name, v=>(i(),l("div",{key:v,class:"p-error"},E(v.$message.replace("Value","Title")),1))),128))])):(i(),l("div",We,[Xe,o("h2",{class:"cursor-pointer text-black-alpha-90",onClick: v=>D(t==null?void 0:t.id)},E(t==null?void 0:t.name),9,Ye)])),t!=null&&t.is_editing_list?(i(),l("div",Ze,[o("i",{class:"pi pi-check mx-3 cursor-pointer text-primary",onClick: v=>$(t==null?void 0:t.id)},null,8,et),o("i",{class:"pi pi-times cursor-pointer text-red-800",onClick: v=>D(t==null?void 0:t.id)},null,8,tt)])):(i(),l("div",st,[o("i",{class:"pi pi-pencil mx-3 cursor-pointer text-blue-800",onClick: v=>D(t==null?void 0:t.id)},null,8,at),o("i",{class:"pi pi-trash cursor-pointer text-red-800",onClick: v=>L(t==null?void 0:t.id)},null,8,nt)]))]),T(He,{filtering:g.filtering,"list-id":parseInt(t==null?void 0:t.id.toString()),"lists-data":g.listsData,"todos-data":t==null?void 0:t.todos,onDeleteTodo:r[0]||(r[0]= v=>x(v)),onCreateTodo:r[1]||(r[1]= v=>d(v)),onIsEditingTodo:r[2]||(r[2]= v=>y(v)),onUpdateTodo:r[3]||(r[3]= v=>I(v)),onDoneTodo:r[4]||(r[4]= v=>_(v))},null,8,["filtering","list-id","lists-data","todos-data"])],2))),128)),g.filtering?q("",!0):(i(),l("div",ot,[T(f,{class:"m-3",label:"+ Add new list",onClick:r[5]||(r[5]= t=>k())})]))],64)}}}),lt={class:"flex flex-column"},dt={class:"flex justify-content-between align-items-center py-3 px-5 bg-cadet-blue"},rt=o("h1",{class:"text-white-alpha-50"},"todo app",-1),ct={class:"mx-3"},ut=o("div",null,null,-1),pt={class:"py-3 px-5 absolute right-0 z-1"},mt={class:"flex flex-column"},ft={class:"p-input-icon-left"},vt=o("i",{class:"pi pi-search z-1"},null,-1),_t={class:"field-checkbox my-3"},gt=o("label",{for:"done"},"Done",-1),ht={class:"field-checkbox"},yt=o("label",{for:"inProgress"},"In progress",-1),xt={class:"flex flex-wrap p-3"},kt=K({__name:"BoardPage",async setup(g){let h,m;const N=pe(),S=V({}),n=V([]),F=ge(),p=parseInt(F.params.id),L=fe(),k=ve(),D=V(!1),$=V(""),x=V(!1),d=V(!1),y=()=>{N.setLists(p,n.value)},I=async()=>await(await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists`)).json(),_=async()=>{try{const e=await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}`);S.value=await e.json(),n.value=await I(),y()}catch(e){D.value||k.add({severity:"error",summary:"Error Message",detail:e,life:3e3})}},c=async()=>{(await I()).length!==Z(p).value.length?await _():(S.value=me().value.find(e=>e.id==p),n.value=Z(p).value)},r=()=>{n.value.forEach((e, a)=>{n.value[a].todos=e.todos.filter(({title:b,content:U,deadline:z})=>[b,U,new Date(z).toLocaleString("sk-SK")].some(R=>R.toLowerCase().includes($.value.toLowerCase())))})},s=()=>{n.value.forEach((e, a)=>{n.value[a].todos=e.todos.filter(({is_done_todo:b})=>[b].some(U=>U===x.value))})},f=()=>{n.value.forEach((e, a)=>{n.value[a].todos=e.todos.filter(({is_done_todo:b})=>[b].some(U=>!U===d.value))})},t=async()=>{D.value=!0,await c(),$.value!==""&&!x.value&&!d.value?r():$.value===""&&x.value&&!d.value?s():$.value===""&&!x.value&&d.value?f():$.value===""&&x.value&&d.value?(s(),f()):$.value!==""&&x.value&&!d.value?(r(),s()):$.value!==""&&!x.value&&d.value?(r(),f()):$.value!==""&&x.value&&d.value&&r()},B=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists/${e}`,{method:"DELETE"}),k.add({severity:"success",summary:"Success Message",detail:"List deleted successfully",life:3e3})}catch(a){k.add({severity:"error",summary:"Error Message",detail:a,life:3e3})}},v=async e=>{await L.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:async()=>{const a=A(n.value,e);n.value.splice(a,1),await B(e),await _(),await t()},reject:()=>{}})},ae=async()=>{n.value.push({id:n.value.length+1,boardId:p,name:"",is_adding_list:!0,is_editing_list:!1,todos:[]});const e=n.value.length-1;await Q({listIndex:e,is_editing_list:!0})},Q=async e=>{n.value[e.listIndex].is_editing_list=e.is_editing_list,e.is_editing_list||await c()},ne=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.value[e.listIndex].name})}),k.add({severity:"success",summary:"Success Message",detail:"List created successfully",life:3e3})}catch(a){k.add({severity:"error",summary:"Error Message",detail:a,life:3e3})}},oe=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists/${e.listId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value[e.listIndex])}),k.add({severity:"success",summary:"Success Message",detail:"List updated successfully",life:3e3})}catch(a){k.add({severity:"error",summary:"Error Message",detail:a,life:3e3})}},ie=async e=>{n.value[e.listIndex]=e.newList,n.value[e.listIndex].is_editing_list=!1,n.value[e.listIndex].is_adding_list?(n.value[e.listIndex].is_adding_list=!1,await ne(e)):await oe(e),await _(),await t()},J=async(e, a)=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value[a])}),k.add({severity:"success",summary:"Success Message",detail:"Todo updated successfully",life:3e3})}catch(b){k.add({severity:"error",summary:"Error Message",detail:b,life:3e3})}},le=async e=>{await L.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:async()=>{const a=A(n.value,e.listId),b=O(n.value[a].todos,e.todoId);n.value[a].todos.splice(b,1),await J(e.listId,a),await _(),await t()},reject:()=>{}})},de=async e=>{const a=A(n.value,e);n.value[a].todos.push({id:n.value[a].todos.length+1,title:"",content:"",deadline:"",is_adding_todo:!0,is_editing_todo:!1,is_done_todo:!1});const b=n.value[a].todos.length-1;await W({listIndex:a,todoIndex:b,is_editing_todo:!0})},W=async e=>{n.value[e.listIndex].todos[e.todoIndex].is_editing_todo=e.is_editing_todo,e.is_editing_todo||await c()},re=async e=>{n.value[e.listIndex].todos[e.todoIndex]=e.newTodo,n.value[e.listIndex].todos[e.todoIndex].is_adding_todo=!1,n.value[e.listIndex].todos[e.todoIndex].is_editing_todo=!1,await J(e.listId,e.listIndex),await _(),await t()},ce=async e=>{n.value[e.listIndex].todos[e.todoIndex].is_done_todo=e.is_done_todo,await J(e.listId,e.listIndex),await _(),await t()};return[h,m]=_e(()=>c()),await h,m(),(e, a)=>{var X;const b=C("RouterLink"),U=C("InputText"),z=C("TheCheckbox"),R=C("AccordionTab"),ue=C("TheAccordion");return i(),l("div",lt,[o("div",dt,[T(b,{class:"no-underline",to:"/"},{default:G(()=>[rt]),_:1}),o("h1",ct,E((X=S.value)==null?void 0:X.title),1),ut]),o("div",pt,[T(ue,null,{default:G(()=>[T(R,{header:"Filter"},{default:G(()=>[o("div",mt,[o("span",ft,[vt,T(U,{modelValue:$.value,"onUpdate:modelValue":a[0]||(a[0]= u=>$.value=u),placeholder:"Search",type:"text",onInput:a[1]||(a[1]= u=>t())},null,8,["modelValue"])]),o("div",_t,[T(z,{modelValue:x.value,"onUpdate:modelValue":a[2]||(a[2]= u=>x.value=u),binary:!0,"input-id":"done",onInput:a[3]||(a[3]= u=>t())},null,8,["modelValue"]),gt]),o("div",ht,[T(z,{modelValue:d.value,"onUpdate:modelValue":a[4]||(a[4]= u=>d.value=u),binary:!0,"input-id":"inProgress",onInput:a[5]||(a[5]= u=>t())},null,8,["modelValue"]),yt])])]),_:1})]),_:1})]),o("div",xt,[T(it,{filtering:D.value,"lists-data":n.value,onDeleteList:a[6]||(a[6]= u=>v(u)),onCreateList:a[7]||(a[7]= u=>ae()),onIsEditingList:a[8]||(a[8]= u=>Q(u)),onUpdateList:a[9]||(a[9]= u=>ie(u)),onDeleteTodo:a[10]||(a[10]= u=>le(u)),onCreateTodo:a[11]||(a[11]= u=>de(u)),onIsEditingTodo:a[12]||(a[12]= u=>W(u)),onUpdateTodo:a[13]||(a[13]= u=>re(u)),onDoneTodo:a[14]||(a[14]= u=>ce(u))},null,8,["filtering","lists-data"])])])}}});export{kt as default};
