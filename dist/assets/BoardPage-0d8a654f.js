import{c as Z,r as G,u as ee,b as j,d as O,l as X,a as ue}from"./index-1b1c0b01.js";import{d as K,r as te,a as B,g as C,o as i,c as l,F as N,b as P,n as M,u as D,e as o,f as b,t as S,E as J,i as pe,j as me,k as fe,w as Y,G as ve}from"./index-f44d9817.js";const _e={key:0,class:"flex flex-column p-3"},ge={class:"flex flex-column my-3"},ye=o("label",{class:"text-primary",for:"content"},"Content",-1),he=["onClick"],xe={class:"flex flex-column"},$e=o("span",{class:"text-primary"},"Title",-1),Te={class:"text-black-alpha-90"},ke={class:"flex flex-column my-3"},be=o("span",{class:"text-primary"},"Content",-1),De={class:"text-black-alpha-90"},we={class:"flex flex-column"},Ie=o("span",{class:"text-primary"},"Deadline",-1),Ce={class:"text-black-alpha-90"},Le={class:"flex justify-content-between align-items-center"},Ve={key:0,class:"flex align-items-center p-3"},Ee=["onClick"],Ae=["onClick"],Be={key:1,class:"flex align-items-center p-3"},Se=["onClick"],je=["onClick"],Ue=["onClick"],Me=["onClick"],Ne={key:2,class:"flex align-items-center p-3"},Fe=o("span",{class:"border-2 border-round-xl p-2 bg-green-800 border-green-800"},"Done",-1),Pe=[Fe],ze={key:3,class:"flex align-items-center p-3"},Oe=o("span",{class:"border-2 border-round-xl p-2 bg-orange-800 border-orange-800"},"In progress",-1),Je=[Oe],Re={key:0,class:"flex"},qe=K({__name:"TheTodos",props:{listId:null,listsData:null,todosData:null,filtering:{type:Boolean}},emits:["deleteTodo","createTodo","isEditingTodo","updateTodo","doneTodo"],setup(g,{emit:y}){const f=g,L={collection:{$each:Z.forEach({title:{required:G},deadline:{required:G}})}},F=te({collection:f.todosData}),r=ee(L,F),U=async()=>await r.value.$validate(),a=B(f.todosData),E=(d,m)=>{y("deleteTodo",{listId:d,todoId:m})},x=d=>{y("createTodo",d)},w=(d,m)=>{const I=j(f.listsData,d),h=O(f.todosData,m);f.todosData[h].is_adding_todo?E(d,m):y("isEditingTodo",{listIndex:I,todoIndex:h,is_editing_todo:!f.todosData[h].is_editing_todo})},k=async(d,m)=>{const I=j(f.listsData,d),h=O(f.todosData,m);await U()&&y("updateTodo",{listIndex:I,listId:d,todoIndex:h,todoId:m,newTodo:a.value[h]})},$=(d,m)=>{const I=j(f.listsData,d),h=O(f.todosData,m);y("doneTodo",{listIndex:I,listId:d,todoIndex:h,todoId:m,is_done_todo:!f.todosData[h].is_done_todo})};return(d,m)=>{const I=C("InputText"),h=C("TheTextarea"),c=C("TheCalendar"),u=C("TheButton");return i(),l(N,null,[(i(!0),l(N,null,P(g.todosData,(s,_)=>(i(),l("div",{key:_,class:M([{errorTitle:D(r).collection.$each.$response.$errors[_].title.length,errorDeadline:D(r).collection.$each.$response.$errors[_].deadline.length},"flex flex-column justify-content-between bg-gray-300 border-round-xl m-3"])},[s!=null&&s.is_editing_todo?(i(),l("div",_e,[o("label",{class:M([{"p-error":D(r).collection.$each.$response.$errors[_].title.length},"text-primary"]),for:"title"},"Title*",2),b(I,{id:"title",modelValue:a.value[_].title,"onUpdate:modelValue":n=>a.value[_].title=n,class:M({"p-invalid":D(r).collection.$each.$response.$errors[_].title.length}),placeholder:"Add title for todo",type:"text"},null,8,["modelValue","onUpdate:modelValue","class"]),(i(!0),l(N,null,P(D(r).collection.$each.$response.$errors[_].title,n=>(i(),l("div",{key:n,class:"p-error"},S(n.$message.replace("Value","Title")),1))),128)),o("div",ge,[ye,b(h,{id:"content",modelValue:a.value[_].content,"onUpdate:modelValue":n=>a.value[_].content=n,"auto-resize":!0,cols:"30",placeholder:"Add content for todo",rows:"5"},null,8,["modelValue","onUpdate:modelValue"])]),o("label",{class:M([{"p-error":D(r).collection.$each.$response.$errors[_].deadline.length},"text-primary"]),for:"deadline"},"Deadline*",2),b(c,{id:"deadline",modelValue:a.value[_].deadline,"onUpdate:modelValue":[n=>a.value[_].deadline=n,n=>D(X)(a.value[_].deadline)],class:M({"p-invalid":D(r).collection.$each.$response.$errors[_].deadline.length}),"date-format":"dd.mm.yy",placeholder:"Add deadline for todo","show-time":""},null,8,["modelValue","onUpdate:modelValue","class"]),(i(!0),l(N,null,P(D(r).collection.$each.$response.$errors[_].deadline,n=>(i(),l("div",{key:n,class:"p-error"},S(n.$message.replace("Value","Deadline")),1))),128))])):(i(),l("div",{key:1,class:"flex flex-column p-3 cursor-pointer",onClick:n=>w(g.listId,s==null?void 0:s.id)},[o("div",xe,[$e,o("h3",Te,S(s==null?void 0:s.title),1)]),o("div",ke,[be,o("p",De,S(s==null?void 0:s.content),1)]),o("div",we,[Ie,o("p",Ce,S(D(X)(s==null?void 0:s.deadline)),1)])],8,he)),o("div",Le,[s!=null&&s.is_editing_todo?(i(),l("div",Ve,[o("i",{class:"pi pi-check cursor-pointer text-primary",onClick:n=>k(g.listId,s==null?void 0:s.id)},null,8,Ee),o("i",{class:"pi pi-times cursor-pointer mx-3 text-red-800",onClick:n=>w(g.listId,s==null?void 0:s.id)},null,8,Ae)])):(i(),l("div",Be,[s!=null&&s.is_done_todo?(i(),l("i",{key:1,class:"pi pi-times cursor-pointer text-red-800",onClick:n=>$(g.listId,s==null?void 0:s.id)},null,8,je)):(i(),l("i",{key:0,class:"pi pi-check cursor-pointer text-primary",onClick:n=>$(g.listId,s==null?void 0:s.id)},null,8,Se)),o("i",{class:"pi pi-pencil mx-3 cursor-pointer text-blue-800",onClick:n=>w(g.listId,s==null?void 0:s.id)},null,8,Ue),o("i",{class:"pi pi-trash cursor-pointer text-red-800",onClick:n=>E(g.listId,s==null?void 0:s.id)},null,8,Me)])),s!=null&&s.is_done_todo?(i(),l("div",Ne,Pe)):J("",!0),!(s!=null&&s.is_adding_todo)&&!(s!=null&&s.is_done_todo)?(i(),l("div",ze,Je)):J("",!0)])],2))),128)),g.filtering?J("",!0):(i(),l("div",Re,[b(u,{class:"m-3",label:"+ Add new todo",onClick:m[0]||(m[0]=s=>x(g.listId))})]))],64)}}}),Ye={class:"flex justify-content-between"},Ge={key:0,class:"flex flex-column p-3"},Ke={key:1,class:"flex flex-column p-3"},He=o("span",{class:"text-primary"},"Name",-1),Qe=["onClick"],We={key:2,class:"flex align-items-center px-3"},Xe=["onClick"],Ze=["onClick"],et={key:3,class:"flex align-items-center px-3"},tt=["onClick"],st=["onClick"],nt={key:0,class:"flex flex-column"},at=K({__name:"TheLists",props:{listsData:null,filtering:{type:Boolean}},emits:["deleteList","createList","isEditingList","updateList","deleteTodo","createTodo","isEditingTodo","updateTodo","doneTodo"],setup(g,{emit:y}){const f=g,L={collection:{$each:Z.forEach({name:{required:G}})}},F=te({collection:f.listsData}),r=ee(L,F),U=async()=>await r.value.$validate(),a=B(f.listsData),E=c=>{y("deleteList",c)},x=()=>{y("createList")},w=c=>{const u=j(f.listsData,c);f.listsData[u].is_adding_list?E(c):y("isEditingList",{listIndex:u,is_editing_list:!f.listsData[u].is_editing_list})},k=async c=>{const u=j(f.listsData,c);await U()&&y("updateList",{listIndex:u,listId:c,newList:a.value[u]})},$=c=>{y("deleteTodo",c)},d=c=>{y("createTodo",c)},m=c=>{y("isEditingTodo",c)},I=c=>{y("updateTodo",c)},h=c=>{y("doneTodo",c)};return(c,u)=>{const s=C("InputText"),_=C("TheButton");return i(),l(N,null,[(i(!0),l(N,null,P(g.listsData,(n,A)=>(i(),l("div",{key:A,class:M([{errorName:D(r).collection.$each.$response.$errors[A].name.length},"flex flex-column bg-gray-200 border-round-xl m-3 w-30rem"])},[o("div",Ye,[n!=null&&n.is_editing_list?(i(),l("div",Ge,[o("label",{class:M([{"p-error":D(r).collection.$each.$response.$errors[A].name.length},"text-primary"]),for:"name"},"Name*",2),b(s,{modelValue:a.value[A].name,"onUpdate:modelValue":v=>a.value[A].name=v,placeholder:"Add name for list",type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(i(!0),l(N,null,P(D(r).collection.$each.$response.$errors[A].name,v=>(i(),l("div",{key:v,class:"p-error"},S(v.$message.replace("Value","Title")),1))),128))])):(i(),l("div",Ke,[He,o("h2",{class:"cursor-pointer text-black-alpha-90",onClick:v=>w(n==null?void 0:n.id)},S(n==null?void 0:n.name),9,Qe)])),n!=null&&n.is_editing_list?(i(),l("div",We,[o("i",{class:"pi pi-check mx-3 cursor-pointer text-primary",onClick:v=>k(n==null?void 0:n.id)},null,8,Xe),o("i",{class:"pi pi-times cursor-pointer text-red-800",onClick:v=>w(n==null?void 0:n.id)},null,8,Ze)])):(i(),l("div",et,[o("i",{class:"pi pi-pencil mx-3 cursor-pointer text-blue-800",onClick:v=>w(n==null?void 0:n.id)},null,8,tt),o("i",{class:"pi pi-trash cursor-pointer text-red-800",onClick:v=>E(n==null?void 0:n.id)},null,8,st)]))]),b(qe,{filtering:g.filtering,"list-id":parseInt(n==null?void 0:n.id.toString()),"lists-data":g.listsData,"todos-data":n==null?void 0:n.todos,onDeleteTodo:u[0]||(u[0]=v=>$(v)),onCreateTodo:u[1]||(u[1]=v=>d(v)),onIsEditingTodo:u[2]||(u[2]=v=>m(v)),onUpdateTodo:u[3]||(u[3]=v=>I(v)),onDoneTodo:u[4]||(u[4]=v=>h(v))},null,8,["filtering","list-id","lists-data","todos-data"])],2))),128)),g.filtering?J("",!0):(i(),l("div",nt,[b(_,{class:"m-3",label:"+ Add new list",onClick:u[5]||(u[5]=n=>x())})]))],64)}}}),ot={class:"flex flex-column"},it={class:"flex justify-content-between align-items-center py-3 px-5 bg-cadet-blue"},lt=o("h1",{class:"text-white-alpha-50"},"todo app",-1),dt={class:"mx-3"},rt=o("div",null,null,-1),ct={class:"py-3 px-5 absolute right-0 z-1"},ut={class:"flex flex-column"},pt={class:"p-input-icon-left"},mt=o("i",{class:"pi pi-search z-1"},null,-1),ft={class:"field-checkbox my-3"},vt=o("label",{for:"done"},"Done",-1),_t={class:"field-checkbox"},gt=o("label",{for:"inProgress"},"In progress",-1),yt={class:"flex flex-wrap p-3"},$t=K({__name:"BoardPage",async setup(g){let y,f;const L=ue(),F=ve(),r=parseInt(F.params.id),U=B({}),a=B([]),E=pe(),x=me(),w=B(!1),k=B(""),$=B(!1),d=B(!1),m=()=>{L.setLists(r,a.value)},I=async()=>{try{const e=await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${r}`),t=await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${r}/lists`),T=await e.json(),V=await t.json();U.value=T,a.value=V,m(),w.value||x.add({severity:"success",summary:"Success Message",detail:"Data fetched successfully",life:3e3})}catch(e){w.value||x.add({severity:"error",summary:"Error Message",detail:e,life:3e3})}},h=async()=>{L.$state.boardId=r,L.getBoards&&L.getLists?(U.value=JSON.parse(L.getBoards).find(e=>e.id==r),a.value=JSON.parse(L.getLists)):await I()},c=()=>{a.value.forEach((e,t)=>{a.value[t].todos=e.todos.filter(({title:T,content:V,deadline:z})=>[T,V,new Date(z).toLocaleString("sk-SK")].some(q=>q.toLowerCase().includes(k.value.toLowerCase())))})},u=()=>{a.value.forEach((e,t)=>{a.value[t].todos=e.todos.filter(({is_done_todo:T})=>[T].some(V=>V===$.value))})},s=()=>{a.value.forEach((e,t)=>{a.value[t].todos=e.todos.filter(({is_done_todo:T})=>[T].some(V=>!V===d.value))})},_=()=>k.value!==""&&!$.value&&!d.value?(c(),!0):k.value===""&&$.value&&!d.value?(u(),!0):k.value===""&&!$.value&&d.value?(s(),!0):k.value===""&&$.value&&d.value?(u(),s(),!0):k.value!==""&&$.value&&!d.value?(c(),u(),!0):k.value!==""&&!$.value&&d.value?(c(),s(),!0):k.value!==""&&$.value&&d.value?(c(),!0):!1,n=async()=>{await h(),w.value=_()},A=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${r}/lists/${e}`,{method:"DELETE"}),x.add({severity:"success",summary:"Success Message",detail:"List deleted successfully",life:3e3})}catch(t){x.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},v=async e=>{await E.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:async()=>{const t=j(a.value,e);a.value.splice(t,1),await A(e),m()},reject:()=>{x.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})},se=async()=>{a.value.push({id:a.value.length+1,boardId:r,name:"",is_adding_list:!0,is_editing_list:!1,todos:[]});const e=a.value.length-1;await H({listIndex:e,is_editing_list:!0})},H=async e=>{a.value[e.listIndex].is_editing_list=e.is_editing_list,e.is_editing_list||await h()},ne=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${r}/lists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.value[e.listIndex].name})}),x.add({severity:"success",summary:"Success Message",detail:"List created successfully",life:3e3})}catch(t){x.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},ae=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${r}/lists/${e.listId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value[e.listIndex])}),x.add({severity:"success",summary:"Success Message",detail:"List updated successfully",life:3e3})}catch(t){x.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},oe=async e=>{a.value[e.listIndex]=e.newList,a.value[e.listIndex].is_editing_list=!1,a.value[e.listIndex].is_adding_list?(a.value[e.listIndex].is_adding_list=!1,await ne(e)):await ae(e),m()},R=async(e,t)=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${r}/lists/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value[t])}),x.add({severity:"success",summary:"Success Message",detail:"Toast updated successfully",life:3e3})}catch(T){x.add({severity:"error",summary:"Error Message",detail:T,life:3e3})}},ie=async e=>{await E.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:async()=>{const t=j(a.value,e.listId),T=O(a.value[t].todos,e.todoId);a.value[t].todos.splice(T,1),await R(e.listId,t),m()},reject:()=>{x.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})},le=async e=>{const t=j(a.value,e);a.value[t].todos.push({id:a.value[t].todos.length+1,title:"",content:"",deadline:"",is_adding_todo:!0,is_editing_todo:!1,is_done_todo:!1});const T=a.value[t].todos.length-1;await Q({listIndex:t,todoIndex:T,is_editing_todo:!0})},Q=async e=>{a.value[e.listIndex].todos[e.todoIndex].is_editing_todo=e.is_editing_todo,e.is_editing_todo||await h()},de=async e=>{a.value[e.listIndex].todos[e.todoIndex]=e.newTodo,a.value[e.listIndex].todos[e.todoIndex].is_adding_todo=!1,a.value[e.listIndex].todos[e.todoIndex].is_editing_todo=!1,await R(e.listId,e.listIndex),m()},re=async e=>{a.value[e.listIndex].todos[e.todoIndex].is_done_todo=e.is_done_todo,await R(e.listId,e.listIndex),m()};return[y,f]=fe(()=>h()),await y,f(),(e,t)=>{var W;const T=C("RouterLink"),V=C("InputText"),z=C("TheCheckbox"),q=C("AccordionTab"),ce=C("TheAccordion");return i(),l("div",ot,[o("div",it,[b(T,{class:"no-underline",to:"/"},{default:Y(()=>[lt]),_:1}),o("h1",dt,S((W=U.value)==null?void 0:W.title),1),rt]),o("div",ct,[b(ce,null,{default:Y(()=>[b(q,{header:"Filter"},{default:Y(()=>[o("div",ut,[o("span",pt,[mt,b(V,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=p=>k.value=p),placeholder:"Search",type:"text",onInput:t[1]||(t[1]=p=>n())},null,8,["modelValue"])]),o("div",ft,[b(z,{modelValue:$.value,"onUpdate:modelValue":t[2]||(t[2]=p=>$.value=p),binary:!0,"input-id":"done",onInput:t[3]||(t[3]=p=>n())},null,8,["modelValue"]),vt]),o("div",_t,[b(z,{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=p=>d.value=p),binary:!0,"input-id":"inProgress",onInput:t[5]||(t[5]=p=>n())},null,8,["modelValue"]),gt])])]),_:1})]),_:1})]),o("div",yt,[b(at,{filtering:w.value,"lists-data":a.value,onDeleteList:t[6]||(t[6]=p=>v(p)),onCreateList:t[7]||(t[7]=p=>se()),onIsEditingList:t[8]||(t[8]=p=>H(p)),onUpdateList:t[9]||(t[9]=p=>oe(p)),onDeleteTodo:t[10]||(t[10]=p=>ie(p)),onCreateTodo:t[11]||(t[11]=p=>le(p)),onIsEditingTodo:t[12]||(t[12]=p=>Q(p)),onUpdateTodo:t[13]||(t[13]=p=>de(p)),onDoneTodo:t[14]||(t[14]=p=>re(p))},null,8,["filtering","lists-data"])])])}}});export{$t as default};
