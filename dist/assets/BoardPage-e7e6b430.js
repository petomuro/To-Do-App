import{c as te,r as G,u as se,d as S,e as R,l as X,a as pe,b as Z,g as ee}from"./index-f69026f5.js";import{d as H,r as oe,a as E,g as C,o as i,c as l,F as M,b as z,n as U,u as D,e as a,f as b,t as A,G as O,i as me,j as ve,k as fe,w as Y,H as _e}from"./index-1d2aef31.js";const ge={key:0,class:"flex flex-column p-3"},he={class:"flex flex-column my-3"},ye=a("label",{class:"text-primary",for:"content"},"Content",-1),xe=["onClick"],$e={class:"flex flex-column"},Te=a("span",{class:"text-primary"},"Title",-1),ke={class:"text-black-alpha-90"},be={class:"flex flex-column my-3"},De=a("span",{class:"text-primary"},"Content",-1),Ie={class:"text-black-alpha-90"},we={class:"flex flex-column"},Ce=a("span",{class:"text-primary"},"Deadline",-1),Le={class:"text-black-alpha-90"},Ve={class:"flex justify-content-between align-items-center"},Ee={key:0,class:"flex align-items-center p-3"},Ae=["onClick"],Se=["onClick"],Be={key:1,class:"flex align-items-center p-3"},je=["onClick"],Ue=["onClick"],Me=["onClick"],Ne=["onClick"],Pe={key:2,class:"flex align-items-center p-3"},ze=a("span",{class:"border-2 border-round-xl p-2 bg-green-800 border-green-800"},"Done",-1),Fe=[ze],Re={key:3,class:"flex align-items-center p-3"},Oe=a("span",{class:"border-2 border-round-xl p-2 bg-orange-800 border-orange-800"},"In progress",-1),qe=[Oe],Je={key:0,class:"flex"},Ye=H({__name:"TheTodos",props:{listId:null,listsData:null,todosData:null,filtering:{type:Boolean}},emits:["deleteTodo","createTodo","isEditingTodo","updateTodo","doneTodo"],setup(g,{emit:h}){const v=g,N={collection:{$each:te.forEach({title:{required:G},deadline:{required:G}})}},B=oe({collection:v.todosData}),n=se(N,B),P=async()=>await n.value.$validate(),p=E(v.todosData),V=(d,m)=>{h("deleteTodo",{listId:d,todoId:m})},x=d=>{h("createTodo",d)},I=(d,m)=>{const w=S(v.listsData,d),y=R(v.todosData,m);v.todosData[y].is_adding_todo?V(d,m):h("isEditingTodo",{listIndex:w,todoIndex:y,is_editing_todo:!v.todosData[y].is_editing_todo})},k=async(d,m)=>{const w=S(v.listsData,d),y=R(v.todosData,m);await P()&&h("updateTodo",{listIndex:w,listId:d,todoIndex:y,todoId:m,newTodo:p.value[y]})},$=(d,m)=>{const w=S(v.listsData,d),y=R(v.todosData,m);h("doneTodo",{listIndex:w,listId:d,todoIndex:y,todoId:m,is_done_todo:!v.todosData[y].is_done_todo})};return(d,m)=>{const w=C("InputText"),y=C("TheTextarea"),r=C("TheCalendar"),c=C("TheButton");return i(),l(M,null,[(i(!0),l(M,null,z(g.todosData,(s,f)=>(i(),l("div",{key:s.id,class:U([{errorTitle:D(n).collection.$each.$response.$errors[f].title.length,errorDeadline:D(n).collection.$each.$response.$errors[f].deadline.length},"flex flex-column justify-content-between bg-gray-300 border-round-xl m-3"])},[s!=null&&s.is_editing_todo?(i(),l("div",ge,[a("label",{class:U([{"p-error":D(n).collection.$each.$response.$errors[f].title.length},"text-primary"]),for:"title"},"Title*",2),b(w,{id:"title",modelValue:p.value[f].title,"onUpdate:modelValue":o=>p.value[f].title=o,class:U({"p-invalid":D(n).collection.$each.$response.$errors[f].title.length}),placeholder:"Add title for todo",type:"text"},null,8,["modelValue","onUpdate:modelValue","class"]),(i(!0),l(M,null,z(D(n).collection.$each.$response.$errors[f].title,o=>(i(),l("div",{key:o,class:"p-error"},A(o.$message.replace("Value","Title")),1))),128)),a("div",he,[ye,b(y,{id:"content",modelValue:p.value[f].content,"onUpdate:modelValue":o=>p.value[f].content=o,"auto-resize":!0,cols:"30",placeholder:"Add content for todo",rows:"5"},null,8,["modelValue","onUpdate:modelValue"])]),a("label",{class:U([{"p-error":D(n).collection.$each.$response.$errors[f].deadline.length},"text-primary"]),for:"deadline"},"Deadline*",2),b(r,{id:"deadline",modelValue:p.value[f].deadline,"onUpdate:modelValue":[o=>p.value[f].deadline=o,o=>D(X)(p.value[f].deadline)],class:U({"p-invalid":D(n).collection.$each.$response.$errors[f].deadline.length}),"date-format":"dd.mm.yy",placeholder:"Add deadline for todo","show-time":""},null,8,["modelValue","onUpdate:modelValue","class"]),(i(!0),l(M,null,z(D(n).collection.$each.$response.$errors[f].deadline,o=>(i(),l("div",{key:o,class:"p-error"},A(o.$message.replace("Value","Deadline")),1))),128))])):(i(),l("div",{key:1,class:"flex flex-column p-3 cursor-pointer",onClick:o=>I(g.listId,s==null?void 0:s.id)},[a("div",$e,[Te,a("h3",ke,A(s==null?void 0:s.title),1)]),a("div",be,[De,a("p",Ie,A(s==null?void 0:s.content),1)]),a("div",we,[Ce,a("p",Le,A(D(X)(s==null?void 0:s.deadline)),1)])],8,xe)),a("div",Ve,[s!=null&&s.is_editing_todo?(i(),l("div",Ee,[a("i",{class:"pi pi-check cursor-pointer text-primary",onClick:o=>k(g.listId,s==null?void 0:s.id)},null,8,Ae),a("i",{class:"pi pi-times cursor-pointer mx-3 text-red-800",onClick:o=>I(g.listId,s==null?void 0:s.id)},null,8,Se)])):(i(),l("div",Be,[s!=null&&s.is_done_todo?(i(),l("i",{key:1,class:"pi pi-times cursor-pointer text-red-800",onClick:o=>$(g.listId,s==null?void 0:s.id)},null,8,Ue)):(i(),l("i",{key:0,class:"pi pi-check cursor-pointer text-primary",onClick:o=>$(g.listId,s==null?void 0:s.id)},null,8,je)),a("i",{class:"pi pi-pencil mx-3 cursor-pointer text-blue-800",onClick:o=>I(g.listId,s==null?void 0:s.id)},null,8,Me),a("i",{class:"pi pi-trash cursor-pointer text-red-800",onClick:o=>V(g.listId,s==null?void 0:s.id)},null,8,Ne)])),s!=null&&s.is_done_todo?(i(),l("div",Pe,Fe)):O("",!0),!(s!=null&&s.is_adding_todo)&&!(s!=null&&s.is_done_todo)?(i(),l("div",Re,qe)):O("",!0)])],2))),128)),g.filtering?O("",!0):(i(),l("div",Je,[b(c,{class:"m-3",label:"+ Add new todo",onClick:m[0]||(m[0]=s=>x(g.listId))})]))],64)}}}),Ge={class:"flex justify-content-between"},He={key:0,class:"flex flex-column p-3"},Ke={key:1,class:"flex flex-column p-3"},Qe=a("span",{class:"text-primary"},"Name",-1),We=["onClick"],Xe={key:2,class:"flex align-items-center px-3"},Ze=["onClick"],et=["onClick"],tt={key:3,class:"flex align-items-center px-3"},st=["onClick"],ot=["onClick"],nt={key:0,class:"flex flex-column"},at=H({__name:"TheLists",props:{listsData:null,filtering:{type:Boolean}},emits:["deleteList","createList","isEditingList","updateList","deleteTodo","createTodo","isEditingTodo","updateTodo","doneTodo"],setup(g,{emit:h}){const v=g,N={collection:{$each:te.forEach({name:{required:G}})}},B=oe({collection:v.listsData}),n=se(N,B),P=async()=>await n.value.$validate(),p=E(v.listsData),V=r=>{h("deleteList",r)},x=()=>{h("createList")},I=r=>{const c=S(v.listsData,r);v.listsData[c].is_adding_list?V(r):h("isEditingList",{listIndex:c,is_editing_list:!v.listsData[c].is_editing_list})},k=async r=>{const c=S(v.listsData,r);await P()&&h("updateList",{listIndex:c,listId:r,newList:p.value[c]})},$=r=>{h("deleteTodo",r)},d=r=>{h("createTodo",r)},m=r=>{h("isEditingTodo",r)},w=r=>{h("updateTodo",r)},y=r=>{h("doneTodo",r)};return(r,c)=>{const s=C("InputText"),f=C("TheButton");return i(),l(M,null,[(i(!0),l(M,null,z(g.listsData,(o,j)=>(i(),l("div",{key:o.id,class:U([{errorName:D(n).collection.$each.$response.$errors[j].name.length},"flex flex-column bg-gray-200 border-round-xl m-3 w-30rem"])},[a("div",Ge,[o!=null&&o.is_editing_list?(i(),l("div",He,[a("label",{class:U([{"p-error":D(n).collection.$each.$response.$errors[j].name.length},"text-primary"]),for:"name"},"Name*",2),b(s,{modelValue:p.value[j].name,"onUpdate:modelValue":_=>p.value[j].name=_,placeholder:"Add name for list",type:"text"},null,8,["modelValue","onUpdate:modelValue"]),(i(!0),l(M,null,z(D(n).collection.$each.$response.$errors[j].name,_=>(i(),l("div",{key:_,class:"p-error"},A(_.$message.replace("Value","Title")),1))),128))])):(i(),l("div",Ke,[Qe,a("h2",{class:"cursor-pointer text-black-alpha-90",onClick:_=>I(o==null?void 0:o.id)},A(o==null?void 0:o.name),9,We)])),o!=null&&o.is_editing_list?(i(),l("div",Xe,[a("i",{class:"pi pi-check mx-3 cursor-pointer text-primary",onClick:_=>k(o==null?void 0:o.id)},null,8,Ze),a("i",{class:"pi pi-times cursor-pointer text-red-800",onClick:_=>I(o==null?void 0:o.id)},null,8,et)])):(i(),l("div",tt,[a("i",{class:"pi pi-pencil mx-3 cursor-pointer text-blue-800",onClick:_=>I(o==null?void 0:o.id)},null,8,st),a("i",{class:"pi pi-trash cursor-pointer text-red-800",onClick:_=>V(o==null?void 0:o.id)},null,8,ot)]))]),b(Ye,{filtering:g.filtering,"list-id":parseInt(o==null?void 0:o.id.toString()),"lists-data":g.listsData,"todos-data":o==null?void 0:o.todos,onDeleteTodo:c[0]||(c[0]=_=>$(_)),onCreateTodo:c[1]||(c[1]=_=>d(_)),onIsEditingTodo:c[2]||(c[2]=_=>m(_)),onUpdateTodo:c[3]||(c[3]=_=>w(_)),onDoneTodo:c[4]||(c[4]=_=>y(_))},null,8,["filtering","list-id","lists-data","todos-data"])],2))),128)),g.filtering?O("",!0):(i(),l("div",nt,[b(f,{class:"m-3",label:"+ Add new list",onClick:c[5]||(c[5]=o=>x())})]))],64)}}}),it={class:"flex flex-column"},lt={class:"flex justify-content-between align-items-center py-3 px-5 bg-cadet-blue"},dt=a("h1",{class:"text-white-alpha-50"},"todo app",-1),rt={class:"mx-3"},ct=a("div",null,null,-1),ut={class:"py-3 px-5 absolute right-0 z-1"},pt={class:"flex flex-column"},mt={class:"p-input-icon-left"},vt=a("i",{class:"pi pi-search z-1"},null,-1),ft={class:"field-checkbox my-3"},_t=a("label",{for:"done"},"Done",-1),gt={class:"field-checkbox"},ht=a("label",{for:"inProgress"},"In progress",-1),yt={class:"flex flex-wrap p-3"},Tt=H({__name:"BoardPage",async setup(g){let h,v;const N=pe(),B=E({}),n=E([]),P=_e(),p=parseInt(P.params.id),V=me(),x=ve(),I=E(!1),k=E(""),$=E(!1),d=E(!1),m=()=>{N.setLists(p,n.value)},w=async()=>{try{const e=await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}`),t=await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists`),T=await e.json(),L=await t.json();B.value=T,n.value=L,m()}catch(e){I.value||x.add({severity:"error",summary:"Error Message",detail:e,life:3e3})}},y=async()=>{Z().value.length>0&&ee(p).value.length>0?(B.value=Z().value.find(e=>e.id==p),n.value=ee(p).value):await w()},r=()=>{n.value.forEach((e,t)=>{n.value[t].todos=e.todos.filter(({title:T,content:L,deadline:F})=>[T,L,new Date(F).toLocaleString("sk-SK")].some(J=>J.toLowerCase().includes(k.value.toLowerCase())))})},c=()=>{n.value.forEach((e,t)=>{n.value[t].todos=e.todos.filter(({is_done_todo:T})=>[T].some(L=>L===$.value))})},s=()=>{n.value.forEach((e,t)=>{n.value[t].todos=e.todos.filter(({is_done_todo:T})=>[T].some(L=>!L===d.value))})},f=async()=>{I.value=!0,await y(),k.value!==""&&!$.value&&!d.value?r():k.value===""&&$.value&&!d.value?c():k.value===""&&!$.value&&d.value?s():k.value===""&&$.value&&d.value?(c(),s()):k.value!==""&&$.value&&!d.value?(r(),c()):k.value!==""&&!$.value&&d.value?(r(),s()):k.value!==""&&$.value&&d.value&&r()},o=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists/${e}`,{method:"DELETE"}),x.add({severity:"success",summary:"Success Message",detail:"List deleted successfully",life:3e3})}catch(t){x.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},j=async e=>{await V.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:async()=>{const t=S(n.value,e);n.value.splice(t,1),await o(e),m()},reject:()=>{x.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})},_=async()=>{n.value.push({id:n.value.length+1,boardId:p,name:"",is_adding_list:!0,is_editing_list:!1,todos:[]});const e=n.value.length-1;await K({listIndex:e,is_editing_list:!0})},K=async e=>{n.value[e.listIndex].is_editing_list=e.is_editing_list,e.is_editing_list||await y()},ne=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.value[e.listIndex].name})}),x.add({severity:"success",summary:"Success Message",detail:"List created successfully",life:3e3})}catch(t){x.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},ae=async e=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists/${e.listId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value[e.listIndex])}),x.add({severity:"success",summary:"Success Message",detail:"List updated successfully",life:3e3})}catch(t){x.add({severity:"error",summary:"Error Message",detail:t,life:3e3})}},ie=async e=>{n.value[e.listIndex]=e.newList,n.value[e.listIndex].is_editing_list=!1,n.value[e.listIndex].is_adding_list?(n.value[e.listIndex].is_adding_list=!1,await ne(e)):await ae(e),m()},q=async(e,t)=>{try{await fetch(`https://63d3f5218d4e68c14eb69fe7.mockapi.io/api/v1/boards/${p}/lists/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value[t])}),x.add({severity:"success",summary:"Success Message",detail:"Toast updated successfully",life:3e3})}catch(T){x.add({severity:"error",summary:"Error Message",detail:T,life:3e3})}},le=async e=>{await V.require({message:"Are you sure you want to proceed?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:async()=>{const t=S(n.value,e.listId),T=R(n.value[t].todos,e.todoId);n.value[t].todos.splice(T,1),await q(e.listId,t),m()},reject:()=>{x.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})},de=async e=>{const t=S(n.value,e);n.value[t].todos.push({id:n.value[t].todos.length+1,title:"",content:"",deadline:"",is_adding_todo:!0,is_editing_todo:!1,is_done_todo:!1});const T=n.value[t].todos.length-1;await Q({listIndex:t,todoIndex:T,is_editing_todo:!0})},Q=async e=>{n.value[e.listIndex].todos[e.todoIndex].is_editing_todo=e.is_editing_todo,e.is_editing_todo||await y()},re=async e=>{n.value[e.listIndex].todos[e.todoIndex]=e.newTodo,n.value[e.listIndex].todos[e.todoIndex].is_adding_todo=!1,n.value[e.listIndex].todos[e.todoIndex].is_editing_todo=!1,await q(e.listId,e.listIndex),m()},ce=async e=>{n.value[e.listIndex].todos[e.todoIndex].is_done_todo=e.is_done_todo,await q(e.listId,e.listIndex),m()};return[h,v]=fe(()=>y()),await h,v(),(e,t)=>{var W;const T=C("RouterLink"),L=C("InputText"),F=C("TheCheckbox"),J=C("AccordionTab"),ue=C("TheAccordion");return i(),l("div",it,[a("div",lt,[b(T,{class:"no-underline",to:"/"},{default:Y(()=>[dt]),_:1}),a("h1",rt,A((W=B.value)==null?void 0:W.title),1),ct]),a("div",ut,[b(ue,null,{default:Y(()=>[b(J,{header:"Filter"},{default:Y(()=>[a("div",pt,[a("span",mt,[vt,b(L,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=u=>k.value=u),placeholder:"Search",type:"text",onInput:t[1]||(t[1]=u=>f())},null,8,["modelValue"])]),a("div",ft,[b(F,{modelValue:$.value,"onUpdate:modelValue":t[2]||(t[2]=u=>$.value=u),binary:!0,"input-id":"done",onInput:t[3]||(t[3]=u=>f())},null,8,["modelValue"]),_t]),a("div",gt,[b(F,{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=u=>d.value=u),binary:!0,"input-id":"inProgress",onInput:t[5]||(t[5]=u=>f())},null,8,["modelValue"]),ht])])]),_:1})]),_:1})]),a("div",yt,[b(at,{filtering:I.value,"lists-data":n.value,onDeleteList:t[6]||(t[6]=u=>j(u)),onCreateList:t[7]||(t[7]=u=>_()),onIsEditingList:t[8]||(t[8]=u=>K(u)),onUpdateList:t[9]||(t[9]=u=>ie(u)),onDeleteTodo:t[10]||(t[10]=u=>le(u)),onCreateTodo:t[11]||(t[11]=u=>de(u)),onIsEditingTodo:t[12]||(t[12]=u=>Q(u)),onUpdateTodo:t[13]||(t[13]=u=>re(u)),onDoneTodo:t[14]||(t[14]=u=>ce(u))},null,8,["filtering","lists-data"])])])}}});export{Tt as default};
